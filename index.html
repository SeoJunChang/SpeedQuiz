<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
	<title>스피드 퀴즈: 미친 모드</title>
	<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
	<style>
		*{margin:0;padding:0;box-sizing:border-box}
		:root{--bg:#0f172a;--bg2:#1e293b;--bg3:#334155;--accent:#3b82f6;--gold:#fbbf24;--error:#ef4444;--success:#22c55e;--crazy:#ff4757}
		body{font-family:'Apple SD Gothic Neo',sans-serif;background:var(--bg);color:#fff;height:100vh;display:flex;justify-content:center}
		.app{width:100%;max-width:500px;display:flex;flex-direction:column;padding:20px}
		header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
		.cat-badge{display:inline-block;padding:4px 10px;background:var(--accent);border-radius:20px;font-size:12px;margin-bottom:10px}
		.progress-container{width:100%;height:6px;background:#334155;border-radius:3px;overflow:hidden;margin-bottom:20px}
		.timer-bar{width:100%;height:100%;background:linear-gradient(to right, #3b82f6, #fbbf24);transition:width 0.1s linear}
		.game-card{background:var(--bg2);border-radius:20px;padding:30px;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;position:relative;box-shadow:0 10px 25px rgba(0,0,0,0.3)}

		/* 카테고리 그리드 및 스크롤 최적화 */
		.cat-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
			gap: 10px;
			width: 100%;
			margin-top: 20px;
			max-height: 50vh;
			overflow-y: auto;
			padding: 5px;
			-webkit-overflow-scrolling: touch;
		}

		.btn-cat {
			padding: 15px 10px; border: none; border-radius: 15px; background: var(--accent);
			color: #fff; font-weight: bold; font-size: 16px; cursor: pointer; min-height: 54px;
			display: flex; align-items: center; justify-content: center;
		}
		.btn-crazy { background: var(--crazy) !important; grid-column: 1 / -1; font-size: 18px !important; }

		.question{font-size:24px; font-weight:bold; margin-bottom:30px; line-height:1.4; word-break: keep-all;}
		.answer-input{width:100%; background:var(--bg3); border:2px solid transparent; padding:15px; border-radius:12px; color:#fff; font-size:24px; text-align:center; outline:none}
		.answer-input:focus{border-color:var(--accent)}

		/* 결과창 및 등급 스타일 */
		.result-overlay{position:fixed; inset:0; background:var(--bg); display:none; flex-direction:column; align-items:center; justify-content:center; z-index:100; padding:20px; overflow-y: auto;}
		.result-overlay.on{display:flex}

		.grade-badge {
			font-size: 80px; font-weight: 900; margin: 10px 0;
			text-shadow: 0 0 20px rgba(255,255,255,0.3);
			animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
		}
		.grade-S { color: var(--crazy); }
		.grade-A { color: var(--gold); }
		.grade-B { color: var(--success); }
		.grade-C { color: #888; }

		.btn-main{padding:15px 40px; border:none; border-radius:30px; background:var(--accent); color:#fff; font-weight:bold; font-size:18px; cursor:pointer; margin-top:15px; width: 100%; max-width: 300px;}
		.btn-share { background: #44bd32 !important; }

		#hint { min-height: 20px; color: var(--gold); font-size: 14px; margin-top: 20px; }
		@keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
		@keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

		.cat-grid::-webkit-scrollbar { width: 6px; }
		.cat-grid::-webkit-scrollbar-thumb { background: var(--bg3); border-radius: 10px; }
	</style>
</head>
<body>
	<div class="app">
		<header>
			<div id="status">로딩 중...</div>
			<div>점수: <span id="score">0</span></div>
		</header>
		<div class="progress-container"><div id="timerBar" class="timer-bar" style="width:0%"></div></div>

		<div id="startScreen" class="game-card">
			<h2 id="welcomeMsg">분야를 선택하세요</h2>
			<div id="categoryButtons" class="cat-grid"></div>
		</div>

		<div id="gameScreen" class="game-card" style="display:none">
			<div id="catBadge" class="cat-badge">카테고리</div>
			<div id="question" class="question"></div>
			<input type="text" id="answerInput" class="answer-input" placeholder="정답 입력" autocomplete="off">
			<div id="hint"></div>
		</div>
	</div>

	<div id="resultOverlay" class="result-overlay">
		<div id="captureArea" style="padding: 30px; background: var(--bg2); border-radius: 20px; text-align: center; width: 100%; max-width: 400px; border: 1px solid var(--bg3);">
			<h2 id="resTitle" style="font-size: 20px; opacity: 0.8;">QUIZ RESULT</h2>
			<div id="gradeBadge" class="grade-badge">S</div>
			<div id="gradeText" style="font-size: 18px; color: var(--gold); margin-bottom: 20px; font-weight: bold;">최고의 실력입니다!</div>

			<div style="font-size: 44px; font-weight: 900; margin-bottom: 20px;"><span id="finalScoreDisplay">0</span></div>

			<div id="resultStats" style="text-align: left; background